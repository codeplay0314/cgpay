# View this workflow on GitHub: https://github.com/common-good/cgpay/actions 

# (Optional) Name of the workflow as it appears on GitHub
name: Node.js CI

# (Optional) Name of the runs generated by the workflow, as they appear on GitHub. Can reference expressions from the `github` context, i.e. `github.actor`.
run-name: ${{ github.actor }} is running a Node CI process

# Specifies the trigger(s) for this workflow, i.e. the `push` event. Can be limited to events on specified branches, paths, or tags.
on:
  push: 
    branches: [ tools/github-actions ]
  pull_request:
    branches: [ tools/github-actions ]

# Groups together all jobs on this workflow.
jobs: 
  # Defines a job named `build` and it's properties.
  build:
    # Specifies the VM runner that will run this job.
    runs-on: ubuntu-latest
    # Groups together all steps on this job.
    steps:
    # Specifies that this step will run `v3` of the `actions/checkout` action. This action checks out our repo onto the runner. Use it for any workflow runs against our repo's code.
    - uses: actions/checkout@v3
    # The `setup-node` action installs the specified version of Node.js and adds `node` and `npm` commands to `PATH`.
    - name: Use Node.js 16.x
      uses: actions/setup-node@v3
      with:
        # Here, version is specified via the matrix context, but it can also be set to exact versions, or a single version.
        node-version: '16.x'
        # (Optional) cache specified dependencies
        cache: 'npm'
    # Executes the specified commands on the runner.
    - name: Install dependencies
    # `npm ci` installs `package-lock.json` versions and prevents updates to the lock file. It is generally faster than `npm install`.
      run: npm ci
    - run: vite dev 
    - run: npm test @a
    